<%- include('header'); -%>

<div class="container-fluid bg-info-subtle mb-4">
  <div class="col-sm-8 mx-auto text-center py-2">
    <h1 class="display-4">World of Ice Cream</h1>
    <p class="lead">Feedback from ice cream lovers....</p>
  </div>
</div>

<div class="container">
  <div id="contentBox1">
    <h1>User Feedback</h1>
    <p>
      There are many wonderful flavours of ice cream available to taste. Here we
      have some feedback from the customers on their favourite type of ice
      creams.
    </p>
  </div>

  <div id="contentBox2">
    <div class="row">
      <%- comments.forEach(comment => { %>
        <%- const user = users.find(u => u.uid === comment.uid); %>
        <%- const icecream = types.find(t => t.id === comment.tid); %>
        <div class="col-md-4 mb-4">
          <div class="card">
            <img src="<%= user.image %>" class="card-img-top" alt="<%= user.name %>" />
            <div class="card-body">
              <h5 class="card-title"><%= user.name %></h5>
              <p class="card-text"><strong>Ice Cream:</strong> <%= icecream.name %></p>
              <p class="card-text">
                <strong>Rating:</strong>
                <%= Array(parseInt(comment.rating)).fill('★').join('') %>
                <%= Array(5 - parseInt(comment.rating)).fill('☆').join('') %>
              </p>
              <p class="card-text"><strong>Review:</strong> <%= comment.text %></p>
              <p class="card-text">
                <small class="text-muted">Last Updated: <%= new Date(comment.posted).toLocaleString() %></small>
              </p>
            </div>
          </div>
        </div>
      <% }); %>
    </div>
  </div>
</div>

<%- include('footer'); -%>
